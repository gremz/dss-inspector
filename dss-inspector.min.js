(function e(){function i(){var e=window&&window.opener&&window.opener.trb&&window.opener.trb.meteringService;if(!e){t(".dss_inspector_activity").addClass("alert busy");s(2e3);return}e.getStatus(function(e){var n=JSON.stringify(e,null,"	");n=n.replace(/urlPattern\"\:(\s\".+\")/gi,'urlPattern": <span class="dss_url_pattern_container hidden"><span class="dss_url_pattern_visibility"></span><span class="dss_inspector_url_pattern" >$1</span></span>');n=n.replace(/\"(.+\"\:)/gi,'<span class="dss_inspector_title">$1').replace(/\"(\:)/gi,":</span>");u(n);t(".refresh_time").html("Last Successful update: "+(new Date).toString());t(".dss_url_pattern_visibility").click(function(e){t(this).parent().toggleClass("hidden")});t(".dss_inspector_activity").removeClass("alert busy")});s(4e3)}function s(e,t){if(!e){return}setTimeout(function(){i()},e)}function o(e,t){n.append('<div class="alert '+(t?t:"")+'">'+e+"</div>")}function u(e){t(".status").html(e)}if(!document.body||!document.head){setTimeout(function(){e()},200);return}var t=window.jQuery,n=t("body"),r=".alert {"+"margin-bottom: 5px; "+"padding: 8px 35px 8px 14px;"+"text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);"+"border: 1px solid #fbeed5;"+"border-radius: 4px;"+"background-color: #fcf8e3;"+"color: #c09853;"+"}"+".error {"+"background-color: #f2dede;"+"border-color: #eed3d7;"+"color: #b94a48;"+"}"+".success {"+"background-color: #dff0d8;"+"border-color: #d6e9c6;"+"color: #468847;"+"}"+".status {"+"white-space: pre-wrap;"+"}"+".busy:after {"+'content: "Wating for metering (or it doesn\'t exist)...";'+"}"+".dss_url_pattern_container.hidden .dss_inspector_url_pattern {"+"display: none;"+"}"+".dss_url_pattern_container.hidden .dss_url_pattern_visibility:after {"+'content: "[Show]";'+"}"+".dss_url_pattern_container .dss_url_pattern_visibility {"+"color: #3a87ad;"+"}"+".dss_url_pattern_container .dss_url_pattern_visibility:after {"+'content: "[Hide]";'+"}"+".dss_inspector_title {"+"color: #468847;"+"}";t("head").append("<style>"+r+"</style>");n.append('<h4>Metering Status</h4><pre class="status"></pre>');n.append('<div class="dss_inspector_activity"></div><span class="refresh_time"></span>');i()})()